<div class="flex items-center w-full justify-between">
  <div class="flex items-center gap-2">
    <div class="size-3.5 rounded-full bg-light-blue"></div>
    <p class="text-dark-gray text-sm">
      {{ event?.startTime | date : "HH:mm" }} -
      {{ event?.endTime | date : "HH:mm" }}
    </p>
  </div>
</div>
<div
  class="flex justify-center items-center border-l-2 border-light-blue w-full ml-1.5 pl-2 pb-8 pt-2"
>
  <div
    class="w-full border items-center border-light-blue rounded-large p-2"
    [ngClass]="{ '': isOpen }"
  >
    <div class="w-full flex items-center justify-between"
    (click)="toggleContent()">
      <div class="flex gap-2 h-full items-center">
        <app-tag [tagName]="event?.tag ?? 'Other'" [dark]="true"></app-tag>
        <div class="flex flex-col items-start justify-start">
          <h3 class="text-black text-lg text-left">{{ event?.name }}</h3>
          <p class="text-dark-gray text-xs text-left">
            @if(selectedCurrencyInfo$ | async; as currencyInfo) {
            @if(currencyInfo.homeCurrency === event?.currency) {
            {{ currencyInfo.homeCurrencySymbol
            }}{{ event?.cost | number : "1.2-2" }} |
            {{ currencyInfo.destinationCurrencySymbol
            }}{{
              (event?.cost ?? 0) * (currencyInfo.exchangeRate ?? 0)
                | number : "1.2-2"
            }}
            } @else if (currencyInfo.destinationCurrency === event?.currency &&
            event?.cost && currencyInfo.exchangeRate) {
            {{ currencyInfo.homeCurrencySymbol
            }}{{
              event?.cost! / currencyInfo.exchangeRate | number : "1.2-2"
            }}
            | {{ currencyInfo.destinationCurrencySymbol
            }}{{ event?.cost | number : "1.2-2" }}
            } }
          </p>
        </div>
      </div>
      @if (isOpen) {
      <ng-icon name="matKeyboardArrowUp" class="text-dark-blue text-4xl"></ng-icon>
      } @else {
      <ng-icon
        name="matKeyboardArrowDown"
        class="text-dark-blue text-4xl"
      ></ng-icon>
      }
    </div>

    @if (isOpen) { 
      <div class="w-full px-2 pt-3">
        @if (event?.notes) {
          <div class="w-full flex flex-col justify-start text-left">
            <h3 class="text-dark-gray font-bold text-left">Notes:</h3>
            <p class="text-black text-sm text-left">{{ event?.notes }}</p>
          </div>
          }
          <div class="flex w-full items-end justify-between">
            @if (event?.locationUrl) {
            <a [href]="event?.locationUrl" target="_blank" class="text-dark-blue"
              >See Location</a
            >
            }
            <div class="flex gap-2">
              <button
                (click)="showDeleteConfirm()"
                nz-button
                class="text-coral border border-coral flex justify-center items-center rounded-lg px-4 py-1"
              >
                <ng-icon name="matDelete" class="text-coral text-lg"></ng-icon>
              </button>
              <app-event-form [edit]="true" [eventInput]="event"></app-event-form>
            </div>
          </div>
      </div>
    }
  </div>
</div>
